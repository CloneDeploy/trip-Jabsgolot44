import{r as w,u as x}from"./relativeTime-DhqfOP43.js";import{d as T,b3 as B,H as I,h as H,i as r,v as L,b4 as M,b5 as N,E as V,o as $,c as j,b as q,b6 as E,_ as G}from"./index-BmRns9_D.js";const R={class:"transition-start"},A=["innerHTML"],C=T({__name:"InvoiceView",props:["bookingId"],setup(d){const i=B();I.extend(w);const{bookingId:n}=d,a=H(E),o=x(),l=r(()=>o.booking),u=r(()=>o.home);return L(async()=>{if(console.log(i.query),"print"in i.query&&setTimeout(()=>{window.print()},1500),n!==null&&n.length){if(await o.fetchBooking(n)===!0){o.setLoading(!1),o.setBussy(!1);const e=u.value,p=e.currency.code,t=e.payment,s=l.value,{code:c,payment:y,paid:_}=s,{part:g,dueNow:h,dueNextText:f,dueNowText:k}=y;t.details.includes("{reference}")&&(t.details=t.details.replace("{reference}",c));for(const[b,v]of Object.entries({status:_?"Paid":"Unpaid",address:`${e.location.address}, ${e.location.city}`,email_id:M(),code:c,sleeps:e.home.guests,payment_gateway:t.gateway,payment_name:t.name,payment_details:N(t.details),payment_instructions:t.instructions,home_img:s.home.image,home_name:s.home.name,city:e.location.city.length?e.location.city:e.location.state,host_name:e.host.name,checkin:s.stay.checkin.parsed,checkout:s.stay.checkout.parsed,guests:s.stay.guests,guests_str:s.stay.guests===1?"Guest":"Guests",due_now:V(h,p),due_next:g?f:k}))a.value=a.value.replaceAll(`{${b}}`,v)}}else o.setValid(!1),console.log("no booking id")}),(m,e)=>($(),j("div",R,[q("div",{innerHTML:a.value},null,8,A)]))}}),U=G(C,[["__scopeId","data-v-32816265"]]);export{U as default};
